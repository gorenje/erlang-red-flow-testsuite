[{"id":"c381b5135cc947cd","type":"tab","label":"[tcp] multiple tcp in connectors (1194)","disabled":false,"info":"## Tcp in connect-to nodes\n\nStarting a tcp service, for example, using netcat `(while date ; do sleep 1 ; done) | nc -lk -p 9393` will cause all three connect to tcp in nodes to receive data.\n\nEach tcp in node will receive the *same* data from the from the host. That is because there is only one connection being maintained. \n\nErlang Red maintains single connections for multiple tcp nodes. Even when multiple tcp in nodes access the same connection, each will receive the same data instead of one connecting to the service and the other nodes not being able to connect.\n\nThis differs to original Node-RED behaviour that will connect a random tcp in node to the service and have it uniquely receive all the data. \n\nNode-RED [forum question](https://discourse.nodered.org/t/tcp-in-nodes-connecting-to-same-host/97975).\n\n\n\n","env":[{"name":"ERED_PENDING","value":"true","type":"bool"},{"name":"ERED_NOT_EUNIT","value":"true","type":"bool"}]},{"id":"564114edd5ba0caf","type":"group","z":"c381b5135cc947cd","style":{"color":"#a4a4a4","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","stroke":"#999999","stroke-opacity":"1"},"nodes":["91ea2827b42734f8","51db6f4e4fabe23e","79a3014b85623de5","8197f5db17d5faa6","6a9c6712d23a8ad9","19b359dc5d9c62d5","29a165c172dd6099","4d2e899d7a424d69","af91f00ddcc05b87"],"x":239,"y":186.875,"w":1285,"h":313.625},{"id":"91ea2827b42734f8","type":"tcp in","z":"c381b5135cc947cd","g":"564114edd5ba0caf","name":"","server":"server","host":"","port":"1194","datamode":"stream","datatype":"utf8","newline":"","topic":"","trim":true,"base64":false,"tls":"","x":504,"y":343.6875,"wires":[["29a165c172dd6099"]]},{"id":"51db6f4e4fabe23e","type":"tcp in","z":"c381b5135cc947cd","g":"564114edd5ba0caf","name":"","server":"server","host":"","port":"1194","datamode":"stream","datatype":"utf8","newline":"","topic":"","trim":true,"base64":false,"tls":"","x":685,"y":459.5,"wires":[["19b359dc5d9c62d5"]]},{"id":"eae4f7026d63b109","type":"tcp request","z":"c381b5135cc947cd","name":"","server":"localhost","port":"1194","out":"time","ret":"string","splitc":"3000","newline":"","trim":false,"tls":"","x":1290,"y":579.75,"wires":[[]]},{"id":"dc60341617690980","type":"inject","z":"c381b5135cc947cd","name":"","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"\"\" & $millis()","payloadType":"jsonata","x":919,"y":725,"wires":[["eae4f7026d63b109"]]},{"id":"f85b44b70643d362","type":"inject","z":"c381b5135cc947cd","name":"","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"\"\" & $millis()","payloadType":"jsonata","x":785,"y":688.6875,"wires":[["eae4f7026d63b109"]]},{"id":"a74eb5d8b2fc9c56","type":"inject","z":"c381b5135cc947cd","name":"","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"\"\" & $millis()","payloadType":"jsonata","x":651,"y":652.375,"wires":[["eae4f7026d63b109"]]},{"id":"97e3ad43a22731af","type":"inject","z":"c381b5135cc947cd","name":"","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"\"\" & $millis()","payloadType":"jsonata","x":517,"y":616.0625,"wires":[["eae4f7026d63b109"]]},{"id":"c741b86b0ddfdf7d","type":"inject","z":"c381b5135cc947cd","name":"","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"\"\" & $millis()","payloadType":"jsonata","x":383,"y":579.75,"wires":[["eae4f7026d63b109"]]},{"id":"79a3014b85623de5","type":"ut-assert-success","z":"c381b5135cc947cd","g":"564114edd5ba0caf","name":"","count":"5","x":1039,"y":227.875,"wires":[]},{"id":"8197f5db17d5faa6","type":"ut-assert-success","z":"c381b5135cc947cd","g":"564114edd5ba0caf","name":"","count":"5","x":1232,"y":266,"wires":[]},{"id":"6a9c6712d23a8ad9","type":"ut-assert-success","z":"c381b5135cc947cd","g":"564114edd5ba0caf","name":"","count":"5","x":1418,"y":304,"wires":[]},{"id":"19b359dc5d9c62d5","type":"switch","z":"c381b5135cc947cd","g":"564114edd5ba0caf","name":"only data packets","property":"_session.status","propertyType":"msg","rules":[{"t":"eq","v":"connected","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":911,"y":304,"wires":[["6a9c6712d23a8ad9"]]},{"id":"29a165c172dd6099","type":"switch","z":"c381b5135cc947cd","g":"564114edd5ba0caf","name":"only data packets","property":"_session.status","propertyType":"msg","rules":[{"t":"eq","v":"connected","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":842,"y":266,"wires":[["8197f5db17d5faa6"]]},{"id":"4d2e899d7a424d69","type":"switch","z":"c381b5135cc947cd","g":"564114edd5ba0caf","name":"only data packets","property":"_session.status","propertyType":"msg","rules":[{"t":"eq","v":"connected","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":797,"y":227.875,"wires":[["79a3014b85623de5"]]},{"id":"af91f00ddcc05b87","type":"tcp in","z":"c381b5135cc947cd","g":"564114edd5ba0caf","name":"","server":"server","host":"","port":"1194","datamode":"stream","datatype":"utf8","newline":"","topic":"","trim":true,"base64":false,"tls":"","x":325,"y":229,"wires":[["4d2e899d7a424d69"]]}]