[{"id":"47514a335b4cd67e","type":"tab","label":"[exec] handle multiple process at once","disabled":false,"info":"this flow demonstrates the ability of the exec node to manage multiple running processes at one time.\n\nexternal processes of `sleep 1000` are started one after another and then are terminated by a separate kill message.\n\nNote: if the timeout is set on the exec node, it will also kill each process individually.","env":[{"name":"ERED_PENDING","type":"bool","value":"false"},{"name":"ERED_TIMEOUT","type":"num","value":"12"}]},{"id":"e85bbe5329de235b","type":"exec","z":"47514a335b4cd67e","command":"sleep 1000","addpay":"","append":"","useSpawn":"true","timer":"","winHide":false,"oldrc":false,"name":"","x":674,"y":446,"wires":[[],[],["bf96e02f7b78f64e","fb6578695bd9598e"]]},{"id":"bf20bf7cb45143fb","type":"inject","z":"47514a335b4cd67e","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":122,"y":152,"wires":[["e85bbe5329de235b","e62f1b9598c87031","fb986ae1a73e3f36","7db1e4f0398b4f23","58326eca1ab40f88","160ebe4acd0960ef","a88dcf477e938c6b"]]},{"id":"bf98365c60dbcd7b","type":"status","z":"47514a335b4cd67e","name":"","scope":["e85bbe5329de235b"],"x":676.0000610351562,"y":525.75,"wires":[["f0f77e64ce2c6c9b"]]},{"id":"14924cd18ebc1d21","type":"change","z":"47514a335b4cd67e","name":"","rules":[{"p":"pid","pt":"msg","t":"set","to":"$split($$.status.text, \":\")","tot":"jsonata"},{"p":"pid","pt":"msg","t":"set","to":"$$.pid[1]","tot":"jsonata"},{"p":"kill","pt":"msg","t":"set","to":"SIGTERM","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":298,"y":848,"wires":[["60f3aa384adc4efa"]]},{"id":"60f3aa384adc4efa","type":"delay","z":"47514a335b4cd67e","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":488,"y":599,"wires":[["e85bbe5329de235b"]]},{"id":"e62f1b9598c87031","type":"delay","z":"47514a335b4cd67e","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":494,"y":152,"wires":[["e85bbe5329de235b"]]},{"id":"fb986ae1a73e3f36","type":"delay","z":"47514a335b4cd67e","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":494,"y":212.5,"wires":[["e85bbe5329de235b"]]},{"id":"7db1e4f0398b4f23","type":"delay","z":"47514a335b4cd67e","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":494,"y":273,"wires":[["e85bbe5329de235b"]]},{"id":"58326eca1ab40f88","type":"delay","z":"47514a335b4cd67e","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":310,"y":385,"wires":[["e85bbe5329de235b"]]},{"id":"160ebe4acd0960ef","type":"delay","z":"47514a335b4cd67e","name":"","pauseType":"delay","timeout":"6","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":310,"y":446,"wires":[["e85bbe5329de235b"]]},{"id":"f0f77e64ce2c6c9b","type":"switch","z":"47514a335b4cd67e","name":"","property":"status.text","propertyType":"msg","rules":[{"t":"neq","v":"Killed","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":839,"y":777,"wires":[["14924cd18ebc1d21","45e7f2eb592b3712","6c76db85e3a4c6b5"]]},{"id":"a88dcf477e938c6b","type":"delay","z":"47514a335b4cd67e","name":"","pauseType":"delay","timeout":"4","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":310,"y":324,"wires":[["e85bbe5329de235b"]]},{"id":"45e7f2eb592b3712","type":"join","z":"47514a335b4cd67e","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","useparts":false,"accumulate":false,"timeout":"","count":"7","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1060,"y":749.75,"wires":[["a29ef1babc809299"]]},{"id":"a29ef1babc809299","type":"ut-assert-success","z":"47514a335b4cd67e","name":"","x":1258,"y":749.75,"wires":[]},{"id":"6c76db85e3a4c6b5","type":"join","z":"47514a335b4cd67e","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","useparts":false,"accumulate":false,"timeout":"","count":"8","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1060,"y":808.5,"wires":[["72d7b08e80d65f6d"]]},{"id":"72d7b08e80d65f6d","type":"ut-assert-failure","z":"47514a335b4cd67e","name":"","x":1258,"y":808.5,"wires":[]},{"id":"bf96e02f7b78f64e","type":"join","z":"47514a335b4cd67e","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","useparts":false,"accumulate":false,"timeout":"","count":"7","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":874,"y":428.75,"wires":[["21e6d1d6b458f0d7"]]},{"id":"21e6d1d6b458f0d7","type":"ut-assert-success","z":"47514a335b4cd67e","name":"","x":1072,"y":428.75,"wires":[]},{"id":"fb6578695bd9598e","type":"join","z":"47514a335b4cd67e","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","useparts":false,"accumulate":false,"timeout":"","count":"8","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":874,"y":487.5,"wires":[["998ec4eb0b7443c7"]]},{"id":"998ec4eb0b7443c7","type":"ut-assert-failure","z":"47514a335b4cd67e","name":"","x":1072,"y":487.5,"wires":[]}]