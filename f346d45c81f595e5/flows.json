[{"id":"f346d45c81f595e5","type":"tab","label":"[http] http static routing","disabled":false,"info":"Simple example of how to do http routing visuallying in the flow editor.\n\nThis can be started in Erlang-RED by deploying to the server and then can be accessed by another browser.","env":[{"name":"ERED_NOT_EUNIT","type":"bool","value":"true"},{"name":"ERED_PENDING","type":"bool","value":"false"},{"name":"ERED_TIMEOUT","type":"num","value":"4"}]},{"id":"abfa2c020b95ae9e","type":"http in","z":"f346d45c81f595e5","name":"","url":"/tf346d45c81f595e5/example01/:page","method":"get","upload":false,"swaggerDoc":"","x":319,"y":581,"wires":[["6fc97c857a69a1be"]]},{"id":"6fc97c857a69a1be","type":"switch","z":"f346d45c81f595e5","name":"","property":"req.params.page","propertyType":"msg","rules":[{"t":"eq","v":"page1","vt":"str"},{"t":"eq","v":"page2","vt":"str"},{"t":"eq","v":"page3","vt":"str"},{"t":"eq","v":"image.svg","vt":"str"},{"t":"eq","v":"flow.json","vt":"str"},{"t":"else"}],"checkall":"false","repair":false,"outputs":6,"x":637.6666412353516,"y":580.9999771118164,"wires":[["83b4ccd0b619f244"],["a89f0c5387dccd4e"],["39cf074fa2bfaf2a"],["3476bc4af55f68a1"],["518f379024ec6e32"],["3d8825286adab940"]]},{"id":"83b4ccd0b619f244","type":"template","z":"f346d45c81f595e5","name":"page1 content","field":"payload","fieldType":"msg","format":"handlebars","syntax":"plain","template":"<p>\nThis is page number one, routed to you by Erlang-RED <i>the visual flow based programming tool</i> powered by Node-RED flow editor.\n</p>\n\n<a href=\"/example01/page2\">Next Page</a>\n\n<br>\n","output":"str","x":909.6666412353516,"y":466.2499771118164,"wires":[["77688de786ca2329"]]},{"id":"77688de786ca2329","type":"http response","z":"f346d45c81f595e5","name":"html content","statusCode":"","headers":{"content-type":"text/html"},"x":1403.6666412353516,"y":466.2499771118164,"wires":[]},{"id":"43901891b8b31e0b","type":"inject","z":"f346d45c81f595e5","name":"test starts here","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":382.6666450500488,"y":208.99997234344482,"wires":[["d0794bae04b5a721"]]},{"id":"0455e52d6481298a","type":"http request","z":"f346d45c81f595e5","name":"","method":"GET","ret":"txt","paytoqs":"ignore","url":"http://localhost:8080/tf346d45c81f595e5/example01/page1","tls":"","persist":false,"proxy":"","insecureHTTPParser":false,"authType":"","senderr":false,"headers":[],"x":770.6666450500488,"y":204.99997234344482,"wires":[["052939ee49dc884f"]]},{"id":"3d8825286adab940","type":"template","z":"f346d45c81f595e5","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"plain","template":"<b>Page Not Found</b>\n","output":"str","x":889.6666412353516,"y":717.2499771118164,"wires":[["2b0fadc5c3583f16"]]},{"id":"2b0fadc5c3583f16","type":"http response","z":"f346d45c81f595e5","name":"html content","statusCode":"404","headers":{"content-type":"text/html"},"x":1403.6666412353516,"y":717.2499771118164,"wires":[]},{"id":"fb940a9af3e05b41","type":"http request","z":"f346d45c81f595e5","name":"","method":"GET","ret":"txt","paytoqs":"ignore","url":"http://localhost:8080/tf346d45c81f595e5/example01/unknown","tls":"","persist":false,"proxy":"","insecureHTTPParser":false,"authType":"","senderr":false,"headers":[],"x":770.6666450500488,"y":263.9999723434448,"wires":[["5cb9be50d953ec61"]]},{"id":"e5324341bc9a0a54","type":"http request","z":"f346d45c81f595e5","name":"","method":"GET","ret":"txt","paytoqs":"ignore","url":"http://localhost:8080/tf346d45c81f595e5/example01/page2","tls":"","persist":false,"proxy":"","insecureHTTPParser":false,"authType":"","senderr":false,"headers":[],"x":772.6666450500488,"y":142.99997234344482,"wires":[["1be51f04e59403bc"]]},{"id":"a89f0c5387dccd4e","type":"template","z":"f346d45c81f595e5","name":"page2 content","field":"payload","fieldType":"msg","format":"handlebars","syntax":"plain","template":"<p>\nPage two is far more interesting since it contains an image.\n</p>\n\n<img src=\"/example01/image.svg\"/>\n\n<P>\n    <a href=\"/example01/page3\">Page three</a> contains a missling page to check the 404 errors are also available.\n</p>","output":"str","x":909.6666412353516,"y":520.2499771118164,"wires":[["918ac7df0c29647d"]]},{"id":"918ac7df0c29647d","type":"http response","z":"f346d45c81f595e5","name":"html content","statusCode":"","headers":{"content-type":"text/html"},"x":1403.6666412353516,"y":520.2499771118164,"wires":[]},{"id":"518f379024ec6e32","type":"file in","z":"f346d45c81f595e5","name":"","filename":"${priv}/testflows//flow.f346d45c81f595e5.json","filenameType":"str","format":"utf8","chunk":false,"sendError":false,"encoding":"none","allProps":false,"x":1009.6666412353516,"y":664.2499771118164,"wires":[["ef94e7d30f2abf0a"]]},{"id":"ef94e7d30f2abf0a","type":"http response","z":"f346d45c81f595e5","name":"json response","statusCode":"","headers":{"content-type":"application/json"},"x":1393.6666412353516,"y":664.2499771118164,"wires":[]},{"id":"3476bc4af55f68a1","type":"template","z":"f346d45c81f595e5","name":"image.svg","field":"payload","fieldType":"msg","format":"html","syntax":"plain","template":"<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<svg\n   id=\"screenshot\"\n   viewBox=\"0 0 750 213\"\n   width=\"750\"\n   height=\"213\"\n   version=\"1.1\"\n   style=\"-webkit-print-color-adjust: exact;\"\n   sodipodi:docname=\"cut-uposh_hr.svg\"\n   inkscape:version=\"1.2 (dc2aeda, 2022-05-15)\"\n   xmlns:inkscape=\"http://www.inkscape.org/namespaces/inkscape\"\n   xmlns:sodipodi=\"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd\"\n   xmlns=\"http://www.w3.org/2000/svg\"\n   xmlns:svg=\"http://www.w3.org/2000/svg\">\n  <defs\n     id=\"defs58754\" />\n  <sodipodi:namedview\n     id=\"namedview58752\"\n     pagecolor=\"#ffffff\"\n     bordercolor=\"#000000\"\n     borderopacity=\"0.25\"\n     inkscape:showpageshadow=\"2\"\n     inkscape:pageopacity=\"0.0\"\n     inkscape:pagecheckerboard=\"0\"\n     inkscape:deskcolor=\"#d1d1d1\"\n     showgrid=\"false\"\n     inkscape:zoom=\"3.1338441\"\n     inkscape:cx=\"417.21922\"\n     inkscape:cy=\"87.432555\"\n     inkscape:window-width=\"1573\"\n     inkscape:window-height=\"484\"\n     inkscape:window-x=\"3942\"\n     inkscape:window-y=\"1348\"\n     inkscape:window-maximized=\"0\"\n     inkscape:current-layer=\"screenshot\" />\n  <path\n     d=\"M 9680,1890 V 400 h 165 165 v 695 694 l 97,101 c 152,159 270,241 398,276 58,16 190,18 264,4 122,-23 232,-106 283,-215 57,-123 58,-140 65,-878 l 6,-677 h 164 164 l -4,713 c -3,674 -5,717 -24,802 -75,330 -305,542 -634,585 -112,15 -193,8 -297,-25 -138,-44 -271,-130 -404,-262 l -78,-77 v 622 622 h -165 -165 z m 3660,0 V 400 h 165 165 v 690 690 l 63,73 c 131,150 312,280 442,316 58,16 211,14 280,-4 158,-42 248,-137 302,-320 15,-54 18,-128 21,-753 l 3,-692 h 165 165 l -3,733 c -4,719 -4,733 -26,812 -49,178 -160,342 -289,428 -123,81 -213,113 -365,129 -93,10 -118,9 -189,-6 -166,-36 -331,-130 -477,-272 -47,-46 -87,-84 -89,-84 -2,0 -3,279 -3,620 v 620 h -165 -165 z m -575,1418 c -3,-7 -88,-301 -191,-653 -102,-352 -313,-1081 -470,-1620 C 11948,496 11815,43 11810,28 l -9,-28 h 137 137 l 474,1618 c 261,889 481,1636 487,1660 l 13,42 h -140 c -103,0 -141,-3 -144,-12 z m 4525,-360 c -50,-132 -142,-317 -200,-405 -79,-120 -191,-225 -293,-274 -45,-22 -47,-25 -47,-66 v -43 h 199 200 l 3,-687 c 3,-616 6,-694 21,-748 60,-209 189,-333 385,-371 177,-34 350,2 504,103 l 38,26 v 134 135 l -32,-19 c -18,-10 -62,-30 -98,-44 -57,-21 -81,-24 -195,-24 -102,0 -136,4 -160,17 -46,25 -86,68 -109,118 -21,44 -21,58 -24,703 l -3,657 h 306 305 v 155 155 h -305 -305 v 295 295 h -73 -74 z M 3440,2504 c -14,-2 -59,-9 -100,-15 -169,-24 -382,-162 -518,-334 l -31,-40 -1,178 v 177 H 2625 2460 V 1235 0 h 165 165 v 341 341 l 67,-62 c 218,-199 456,-295 688,-275 450,37 786,352 892,837 23,105 26,441 5,528 -42,172 -89,280 -172,398 -139,197 -353,338 -580,381 -64,12 -214,21 -250,15 z m 194,-344 c 280,-74 464,-317 483,-641 22,-370 -192,-728 -492,-822 -59,-19 -93,-22 -220,-22 -145,0 -152,1 -221,31 -106,46 -174,95 -289,211 l -105,104 v 265 c 0,285 9,363 55,477 80,201 238,345 435,398 93,25 254,25 354,-1 z m 1947,339 c -110,-13 -214,-45 -326,-99 -511,-250 -739,-861 -521,-1397 93,-227 291,-441 509,-548 417,-204 913,-125 1238,197 198,197 304,440 316,723 14,318 -96,603 -314,820 -244,242 -549,345 -902,304 z m 335,-339 c 208,-53 365,-181 459,-375 63,-131 79,-205 80,-360 0,-235 -63,-392 -220,-551 -104,-105 -186,-152 -317,-185 -113,-28 -317,-23 -423,10 -225,72 -411,271 -475,509 -45,169 -28,391 42,550 73,165 234,322 388,377 135,49 330,59 466,25 z m 2679,336 c -343,-57 -565,-294 -565,-602 0,-184 76,-350 199,-433 84,-58 137,-81 366,-166 304,-112 372,-151 416,-236 63,-125 -30,-298 -193,-360 -56,-21 -79,-24 -208,-24 -131,0 -155,3 -243,29 -55,16 -159,59 -233,96 l -134,66 V 693 520 l 73,-36 c 140,-71 330,-123 509,-138 152,-14 362,35 498,116 136,81 259,242 290,383 6,28 11,89 11,136 0,185 -87,333 -250,428 -78,46 -108,59 -348,145 -217,78 -266,102 -315,153 -121,125 -102,311 42,407 70,46 149,66 262,66 165,0 308,-41 471,-134 l 77,-44 v 174 173 l -44,26 c -179,105 -469,156 -681,121 z m 7860,8 c -11,-2 -45,-9 -75,-15 -152,-31 -368,-204 -478,-384 l -37,-60 -3,213 -2,212 h -165 -165 V 1435 400 h 165 165 v 630 630 l 56,91 c 124,201 233,321 330,366 29,13 89,29 134,35 69,10 93,10 159,-4 42,-9 97,-25 121,-37 24,-11 45,-21 47,-21 2,0 3,85 3,190 v 189 l -52,16 c -55,16 -169,27 -203,19 z M 290,1878 c 0,-730 7,-822 69,-988 137,-365 545,-584 961,-516 320,53 569,259 672,556 43,126 48,208 48,893 v 647 h -170 -170 v -642 c -1,-709 -3,-746 -60,-861 -57,-116 -178,-217 -308,-257 -92,-29 -244,-27 -333,3 -137,47 -251,141 -303,251 -55,116 -56,126 -56,844 v 662 H 465 290 Z M 7315,888 c -113,-41 -195,-150 -196,-261 -2,-121 56,-215 165,-266 75,-37 133,-40 206,-12 76,29 125,74 161,146 29,60 31,71 27,140 -4,60 -11,84 -34,122 -70,112 -217,171 -329,131 z\"\n     transform=\"matrix(0.025,0,0,-0.025,172,135)\"\n     fill=\"#000000\"\n     stroke=\"none\"\n     id=\"path58745\"\n     style=\"display:none;-webkit-print-color-adjust:exact\" />\n  <path\n     style=\"fill:none;stroke:#ff0000;stroke-width:5.205;stroke-linecap:round;stroke-linejoin:round;stroke-opacity:0.980745\"\n     d=\"m 182.87587,75.671899 c 0.75744,14.845009 -5.4956,46.240161 17.66486,46.370091 23.55316,-1.17501 17.66948,-23.85984 18.2092,-45.922691\"\n     id=\"path58811\"\n     sodipodi:nodetypes=\"ccc\" />\n  <path\n     style=\"fill:none;stroke:#ff0000;stroke-width:5.205;stroke-linecap:round;stroke-linejoin:round;stroke-opacity:0.980745\"\n     d=\"m 236.68231,75.208573 0.91278,62.367927\"\n     id=\"path58813\"\n     sodipodi:nodetypes=\"cc\" />\n  <path\n     style=\"fill:none;stroke:#ff0000;stroke-width:5.205;stroke-linecap:round;stroke-linejoin:round;stroke-opacity:0.980745\"\n     d=\"m 242.48958,84.50798 c 47.71874,-31.139949 47.26786,54.84867 3.59911,34.95568\"\n     id=\"path58815\"\n     sodipodi:nodetypes=\"cc\" />\n  <path\n     style=\"fill:none;stroke:#ff0000;stroke-width:5.205;stroke-linecap:round;stroke-linejoin:round;stroke-opacity:0.980745\"\n     d=\"m 291.8253,101.62618 c 4.82616,-34.739992 34.45558,-28.203694 43.59264,-12.473604 9.13784,15.731424 -7.21867,46.700294 -37.71009,27.146354\"\n     id=\"path58817\"\n     sodipodi:nodetypes=\"csc\" />\n  <path\n     style=\"fill:none;stroke:#ff0000;stroke-width:5.205;stroke-linecap:round;stroke-linejoin:round;stroke-opacity:0.980745\"\n     d=\"M 359.77592,126.1369 353.3902,113.40746\"\n     id=\"path58819\"\n     sodipodi:nodetypes=\"cc\" />\n  <path\n     style=\"fill:none;stroke:#ff0000;stroke-width:5.205;stroke-linecap:round;stroke-linejoin:round;stroke-opacity:0.980745;-webkit-print-color-adjust:exact\"\n     d=\"m 351.93759,124.7436 10.50858,-9.61176\"\n     id=\"path58819-8\"\n     sodipodi:nodetypes=\"cc\" />\n  <path\n     style=\"fill:none;stroke:#ff0000;stroke-width:5.205;stroke-linecap:round;stroke-linejoin:round;stroke-opacity:0.980745\"\n     d=\"m 402.88227,79.753777 c -22.04047,-12.809114 -35.45736,11.558708 -18.00926,17.40638 39.98739,13.652123 4.2711,32.110133 -10.25198,22.100363\"\n     id=\"path58821\"\n     sodipodi:nodetypes=\"ccc\" />\n  <path\n     style=\"fill:none;stroke:#ff0000;stroke-width:5.205;stroke-linecap:round;stroke-linejoin:round;stroke-opacity:0.980745\"\n     d=\"m 418.63576,53.072922 c 2.8441,18.861023 2.25991,47.872908 -0.19999,70.920108\"\n     id=\"path58823\"\n     sodipodi:nodetypes=\"cc\" />\n  <path\n     style=\"fill:none;stroke:#ff0000;stroke-width:5.205;stroke-linecap:round;stroke-linejoin:round;stroke-opacity:0.980745\"\n     d=\"m 426.58888,82.656092 c 27.05913,-24.90877 36.26296,17.927048 24.2854,40.819378\"\n     id=\"path58825\"\n     sodipodi:nodetypes=\"cc\" />\n  <path\n     style=\"fill:none;stroke:#ff0000;stroke-width:5.205;stroke-linecap:round;stroke-linejoin:round;stroke-opacity:0.980745;-webkit-print-color-adjust:exact\"\n     d=\"m 508.91998,52.649703 c 2.8441,18.86103 2.25991,47.872907 -0.19999,70.920107\"\n     id=\"path58823-2\"\n     sodipodi:nodetypes=\"cc\" />\n  <path\n     style=\"fill:none;stroke:#ff0000;stroke-width:5.205;stroke-linecap:round;stroke-linejoin:round;stroke-opacity:0.980745;-webkit-print-color-adjust:exact\"\n     d=\"m 516.8731,82.232873 c 27.05913,-24.90877 36.26296,17.927047 24.2854,40.819377\"\n     id=\"path58825-0\"\n     sodipodi:nodetypes=\"cc\" />\n  <path\n     style=\"fill:none;stroke:#ff0000;stroke-width:5.205;stroke-linecap:round;stroke-linejoin:round;stroke-opacity:0.980745\"\n     d=\"M 497.64037,40.645865 466.9699,147.60377\"\n     id=\"path58827\"\n     sodipodi:nodetypes=\"cc\" />\n  <path\n     style=\"fill:none;stroke:#ff0000;stroke-width:5.205;stroke-linecap:round;stroke-linejoin:round;stroke-opacity:0.980745\"\n     d=\"m 563.11865,78.027376 1.24943,46.964894\"\n     id=\"path58833\" />\n  <path\n     style=\"fill:none;stroke:#ff0000;stroke-width:5.205;stroke-linecap:round;stroke-linejoin:round;stroke-opacity:0.980745\"\n     d=\"m 569.09548,85.410387 c 4.48697,-6.03352 8.72964,-12.478417 18.13758,-10.225202\"\n     id=\"path58835\"\n     sodipodi:nodetypes=\"cc\" />\n</svg>\n","output":"str","x":899.6666412353516,"y":612.9999771118164,"wires":[["f57dc82d2f012518"]]},{"id":"f57dc82d2f012518","type":"http response","z":"f346d45c81f595e5","name":"image/svg response","statusCode":"","headers":{"content-type":"image/svg+xml"},"x":1373.6666412353516,"y":612.9999771118164,"wires":[]},{"id":"39cf074fa2bfaf2a","type":"template","z":"f346d45c81f595e5","name":"page3 content","field":"payload","fieldType":"msg","format":"handlebars","syntax":"plain","template":"<p>\nPage three contains a link to the Node-RED flow that made this happen. It works on any other Node-RED that happens to be in the vicinity.\n</p>\n\n<p>\n    Link to the <a href=\"/example01/flow.json\">to the flow</a> that makes this happen.\n</p>\n\n<p>\n Finally, <a href=\"/example01/notfound\">this page does not</a> exist.\n</p>\n\n","output":"str","x":909.6666412353516,"y":568.2499771118164,"wires":[["a622f6c4342adac5"]]},{"id":"a622f6c4342adac5","type":"http response","z":"f346d45c81f595e5","name":"html content","statusCode":"","headers":{"content-type":"text/html"},"x":1403.6666412353516,"y":568.2499771118164,"wires":[]},{"id":"5cb9be50d953ec61","type":"ut-assert-values","z":"f346d45c81f595e5","name":"","rules":[{"p":"statusCode","pt":"msg","t":"eql","to":"404","tot":"num"}],"x":1201.6666450500488,"y":299.4999723434448,"wires":[[]]},{"id":"1be51f04e59403bc","type":"ut-assert-values","z":"f346d45c81f595e5","name":"","rules":[{"p":"statusCode","pt":"msg","t":"eql","to":"200","tot":"num"},{"p":"payload","pt":"msg","t":"mth","to":"Page two is far more interesting","tot":"str"}],"x":1181.6666450500488,"y":109.99997234344482,"wires":[[]]},{"id":"052939ee49dc884f","type":"ut-assert-values","z":"f346d45c81f595e5","name":"","rules":[{"p":"statusCode","pt":"msg","t":"eql","to":"200","tot":"num"},{"p":"payload","pt":"msg","t":"mth","to":"This is page number one","tot":"str"}],"x":1181.6666450500488,"y":204.74997234344482,"wires":[[]]},{"id":"d0794bae04b5a721","type":"delay","z":"f346d45c81f595e5","name":"","pauseType":"random","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"100","randomLast":"500","randomUnits":"milliseconds","drop":false,"allowrate":false,"outputs":1,"x":572.6666450500488,"y":208.99997234344482,"wires":[["e5324341bc9a0a54","0455e52d6481298a","fb940a9af3e05b41"]]}]