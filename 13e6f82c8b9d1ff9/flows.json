[{"disabled":false,"env":[],"id":"13e6f82c8b9d1ff9","info":"## Incorrect code handling\n\nEither the \"On Start\", \"On Stop\" or \"On Message\" tab code could be incorrect - handle that.\n","label":"[function] handle corrupt code","type":"tab"},{"finalize":"","func":"%% Code here is wrapped in a fun (Msg) call\n%% fun (Msg) ->\n    Msg\n%% end.\n","id":"d91de7d1dc574185","initialize":"this code is broken","libs":[],"name":"On start function is broken","noerr":0,"outputs":1,"timeout":0,"type":"function","wires":[[]],"x":975.9999999999998,"y":903.9999999999998,"z":"13e6f82c8b9d1ff9"},{"crontab":"","id":"ad590754b9e5860b","name":"","once":false,"onceDelay":0.1,"payload":"","payloadType":"date","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","topic":"","type":"inject","wires":[["d91de7d1dc574185"]],"x":743,"y":853,"z":"13e6f82c8b9d1ff9"},{"id":"745cdff42a7f4a94","inverse":false,"msgtype":"error","name":"","nodeid":"d91de7d1dc574185","scope":["d91de7d1dc574185"],"type":"ut-assert-debug","wires":[["a5c4071c894817c8"]],"x":929,"y":981.5,"z":"13e6f82c8b9d1ff9"},{"finalize":"","func":"this code is broken","id":"499082d6c1e813a5","initialize":"","libs":[],"name":"On message code is broken","noerr":0,"outputs":1,"timeout":0,"type":"function","wires":[[]],"x":954,"y":1162,"z":"13e6f82c8b9d1ff9"},{"crontab":"","id":"4e5d7ec31ac4fc81","name":"","once":false,"onceDelay":0.1,"payload":"","payloadType":"date","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","topic":"","type":"inject","wires":[["499082d6c1e813a5"]],"x":725.0000000000002,"y":1111.0000000000002,"z":"13e6f82c8b9d1ff9"},{"id":"9a322bb94698aba1","inverse":false,"msgtype":"error","name":"","nodeid":"499082d6c1e813a5","scope":["499082d6c1e813a5"],"type":"ut-assert-debug","wires":[["8010146b02a11c7a"]],"x":898.0000000000002,"y":1227.5000000000002,"z":"13e6f82c8b9d1ff9"},{"finalize":"this code is broken","func":"%% non empty code","id":"bfdf612d581c6537","initialize":"","libs":[],"name":"On stop code is broken","noerr":0,"outputs":1,"timeout":0,"type":"function","wires":[[]],"x":966,"y":1457,"z":"13e6f82c8b9d1ff9"},{"crontab":"","id":"d2cdf70515beea42","name":"","once":false,"onceDelay":0.1,"payload":"","payloadType":"date","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","topic":"","type":"inject","wires":[["bfdf612d581c6537"]],"x":747.0000000000002,"y":1406.0000000000002,"z":"13e6f82c8b9d1ff9"},{"id":"87d341bd9941f17b","inverse":false,"msgtype":"error","name":"","nodeid":"499082d6c1e813a5","scope":["bfdf612d581c6537"],"type":"ut-assert-debug","wires":[["16a684a6a6a4c1b9"]],"x":900.0000000000002,"y":1522.5000000000002,"z":"13e6f82c8b9d1ff9"},{"finalize":"","func":"","id":"64af25711170b21d","initialize":"","libs":[],"name":"On message code is empty","noerr":0,"outputs":1,"timeout":0,"type":"function","wires":[[]],"x":1524,"y":1165,"z":"13e6f82c8b9d1ff9"},{"crontab":"","id":"b840d4345d9cf807","name":"","once":false,"onceDelay":0.1,"payload":"","payloadType":"date","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","topic":"","type":"inject","wires":[["64af25711170b21d"]],"x":1295.0000000000002,"y":1114.0000000000002,"z":"13e6f82c8b9d1ff9"},{"id":"95ddd111838b531f","inverse":false,"msgtype":"error","name":"","nodeid":"499082d6c1e813a5","scope":["64af25711170b21d"],"type":"ut-assert-debug","wires":[["41f3b0a796fb5791","da11bba1cc74cd57"]],"x":1458.0000000000002,"y":1230.5000000000002,"z":"13e6f82c8b9d1ff9"},{"clientcode":"console.log(msg)\nlet ary = Object.keys(msg).map( d => {\n    return [d, msg[d]]\n})\n\nconsole.log(ary)\n\nnode.send(msg)","format":"javascript","id":"41f3b0a796fb5791","name":"","type":"ClientCode","wires":[[]],"x":1852,"y":1304,"z":"13e6f82c8b9d1ff9"},{"id":"a5c4071c894817c8","ignore_failure_if_succeed":false,"name":"","rules":[{"p":"payload['level']","pt":"msg","t":"eql","to":"20","tot":"num"},{"p":"payload.id","pt":"msg","t":"eql","to":"d91de7d1dc574185","tot":"str"},{"p":"payload.format","pt":"msg","t":"eql","to":"object","tot":"str"}],"type":"ut-assert-values","wires":[[]],"x":1296,"y":940,"z":"13e6f82c8b9d1ff9"},{"id":"8010146b02a11c7a","ignore_failure_if_succeed":false,"name":"","rules":[{"p":"payload['level']","pt":"msg","t":"eql","to":"20","tot":"num"},{"p":"payload.id","pt":"msg","t":"eql","to":"499082d6c1e813a5","tot":"str"},{"p":"payload.format","pt":"msg","t":"eql","to":"object","tot":"str"}],"type":"ut-assert-values","wires":[[]],"x":1221,"y":1187,"z":"13e6f82c8b9d1ff9"},{"id":"da11bba1cc74cd57","ignore_failure_if_succeed":false,"name":"","rules":[{"p":"payload['level']","pt":"msg","t":"eql","to":"20","tot":"num"},{"p":"payload.id","pt":"msg","t":"eql","to":"64af25711170b21d","tot":"str"},{"p":"payload.format","pt":"msg","t":"eql","to":"object","tot":"str"}],"type":"ut-assert-values","wires":[[]],"x":1845,"y":1212,"z":"13e6f82c8b9d1ff9"},{"id":"16a684a6a6a4c1b9","ignore_failure_if_succeed":false,"name":"","rules":[{"p":"payload['level']","pt":"msg","t":"eql","to":"20","tot":"num"},{"p":"payload.id","pt":"msg","t":"eql","to":"bfdf612d581c6537","tot":"str"},{"p":"payload.format","pt":"msg","t":"eql","to":"object","tot":"str"}],"type":"ut-assert-values","wires":[[]],"x":1331,"y":1456,"z":"13e6f82c8b9d1ff9"}]