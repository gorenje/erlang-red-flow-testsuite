[{"id":"f1e71f2ccb34fd6e","type":"tab","label":"[join] wait for complete until messages are sent","disabled":false,"info":"## Complete causes join to transmit\n\nManual but a complete was sent, then send those messages that we have collected upto that point.\n\nNo other settings other than array & collect messages.","env":[]},{"id":"bd4fea63b564b113","type":"inject","z":"f1e71f2ccb34fd6e","name":"","props":[{"p":"payload"},{"p":"total","v":"10","vt":"num"},{"p":"count","v":"0","vt":"num"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"hello world","payloadType":"str","x":294,"y":371,"wires":[["f4697e2e7fafe22e"]]},{"id":"f4697e2e7fafe22e","type":"change","z":"f1e71f2ccb34fd6e","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"{ \"index\": $$.count  }","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":497,"y":672,"wires":[["fe44ce86ea5e95c8","81e69f2e6cb1cbdd"]]},{"id":"81e69f2e6cb1cbdd","type":"switch","z":"f1e71f2ccb34fd6e","name":"","property":"count","propertyType":"msg","rules":[{"t":"lt","v":"$$.total","vt":"jsonata"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":385,"y":996,"wires":[["7c5e2bf82e487a8b"],["a8bf11ca097b179c"]]},{"id":"fe44ce86ea5e95c8","type":"join","z":"f1e71f2ccb34fd6e","name":"","mode":"custom","build":"array","property":"","propertyType":"full","key":"topic","joiner":"\\n","joinerType":"str","useparts":false,"accumulate":false,"timeout":"","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":942,"y":672,"wires":[["939aef40fb63ece5"]]},{"id":"7c5e2bf82e487a8b","type":"change","z":"f1e71f2ccb34fd6e","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"$random()","tot":"jsonata"},{"t":"set","p":"count","pt":"msg","to":"$$.count + 1","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":625,"y":927,"wires":[["f4697e2e7fafe22e"]]},{"id":"a8bf11ca097b179c","type":"change","z":"f1e71f2ccb34fd6e","name":"","rules":[{"t":"set","p":"complete","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":677,"y":1001,"wires":[["fe44ce86ea5e95c8"]]},{"id":"939aef40fb63ece5","type":"change","z":"f1e71f2ccb34fd6e","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"$count($$.payload)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1137,"y":727,"wires":[["d69a4f2d9c43af5a"]]},{"id":"d69a4f2d9c43af5a","type":"ut-assert-values","z":"f1e71f2ccb34fd6e","name":"","ignore_failure_if_succeed":false,"rules":[{"t":"eql","p":"payload","pt":"msg","to":"12","tot":"num"}],"x":1368,"y":782,"wires":[[]]}]