[{"id":"1b1489a94d7cc4aa","type":"tab","label":"[captureio] collect io from event handlers","disabled":false,"info":"## CaptureIO and Event Handler Behaviour\n\n","env":[]},{"id":"e153157459ddf61f","type":"erleventhandler","z":"1b1489a94d7cc4aa","name":"","handlers":[{"nodeid":"c8a4ba729fa8b7c9","moduleterm":"","arg":"hello_world"}],"x":590,"y":512.5,"wires":[["3e901138a8355f03"]]},{"id":"c8a4ba729fa8b7c9","type":"erlmodule","z":"1b1489a94d7cc4aa","name":"","module_name":"echo_event_handler_1b1489a94d7cc4aa","code":"-module(echo_event_handler_1b1489a94d7cc4aa).\n\n%%\n%% APIs https://www.erlang.org/doc/apps/stdlib/gen_event.html\n%%\n\n-behaviour(gen_event).\n\n-export([\n    init/1,\n    handle_event/2,\n    handle_call/2,\n    handle_info/2,\n    terminate/2,\n    code_change/3\n]).\n\n-import(ered_nodes, [\n    send_msg_to_connected_nodes/2\n]).\n\ninit(Args) ->\n    {ok, Args}.\n\nhandle_event({<<\"send_initial_value\">>, Msg, EventHandlerNodeDef}, State) ->\n\n    Msg2 = Msg#{ \n        <<\"initial_value\">> => State\n    },\n    \n    io:format(\"generate io format ouptut\"),\n\n    send_msg_to_connected_nodes(EventHandlerNodeDef, Msg2),\n\n    {ok, State};\n\nhandle_event(_Event, State) ->\n    {ok, State}.\n\nhandle_call(_Request, State) ->\n    {ok, ok, State}.\n\nhandle_info(_Info, State) ->\n    {ok, State}.\n\nterminate(_Reason, _State) ->\n    ok.\n\ncode_change(_OldVsn, State, _Extra) ->\n    {ok, State}.\n\n","x":590,"y":324.5,"wires":[]},{"id":"ba46734414451d17","type":"inject","z":"1b1489a94d7cc4aa","name":"","props":[{"p":"event","v":"send_initial_value","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","x":590,"y":603.5,"wires":[["e153157459ddf61f"]]},{"id":"3e901138a8355f03","type":"ut-assert-values","z":"1b1489a94d7cc4aa","name":"","ignore_failure_if_succeed":false,"rules":[{"t":"eql","p":"event","pt":"msg","to":"send_initial_value","tot":"str"},{"t":"eql","p":"initial_value","pt":"msg","to":"hello_world","tot":"str"}],"x":590,"y":438.5,"wires":[[]]},{"id":"8c412fc907a4b1c6","type":"erlcaptureio","z":"1b1489a94d7cc4aa","name":"","scope":["e153157459ddf61f"],"x":891.25,"y":512.5,"wires":[["f71802262bf4c37d"]]},{"id":"f71802262bf4c37d","type":"ut-assert-values","z":"1b1489a94d7cc4aa","name":"","ignore_failure_if_succeed":false,"rules":[{"t":"eql","p":"payload","pt":"msg","to":"generate io format ouptut","tot":"str"},{"t":"eql","p":"captureio.source.id","pt":"msg","to":"e153157459ddf61f","tot":"str"}],"x":1066.25,"y":580,"wires":[[]]}]