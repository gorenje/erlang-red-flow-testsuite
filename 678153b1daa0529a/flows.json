[{"disabled":false,"env":[{"name":"ERED_NOT_EUNIT","type":"bool","value":"true"},{"name":"ERED_TIMEOUT","type":"num","value":"8"}],"id":"678153b1daa0529a","info":"## Function node and exceptions\n\nWhat happens if the function node raises an exception?\n\nThere are three cases to be considered:\n\n- <a class=\"ahl-group-only\" data-ids=\"b7e1e4d9d98ef1bb\">function node is under supervision</a>,\n- <a class=\"ahl-group-only\" data-ids=\"7ed7a1dc7f44409a\">function node is being caught</a> and\n- <a class=\"ahl-group-only\" data-ids=\"5bd563066938c2f3\">function node is neither</a>.\n\nThis is also the case for a <a class=\"ahl-group-only\" data-ids=\"e49cae74aca6e4aa\">time out exception</a> - if the function takes too long and there is a timeout set, then an exception is raised.\n","label":"[function] divide by zero throws kills node","type":"tab"},{"h":759,"id":"e49cae74aca6e4aa","name":"time out exception","nodes":["b2f1aafe54bf14d6","ae831a2255a48b68","3e2cbb65dff9baec"],"style":{"label":true},"type":"group","w":1113.3333435058594,"x":167.66665649414062,"y":1010,"z":"678153b1daa0529a"},{"h":797,"id":"7d829222d2ef7ab2","name":"divide by zero exception","nodes":["b7e1e4d9d98ef1bb","5bd563066938c2f3","7ed7a1dc7f44409a"],"style":{"label":true},"type":"group","w":1140,"x":168,"y":164,"z":"678153b1daa0529a"},{"g":"7d829222d2ef7ab2","h":217.125,"id":"b7e1e4d9d98ef1bb","name":"no exception is raised if function is being supervised","nodes":["e1926e702f82036d","0b270a75f19fe296","a7e6e47b5451fe98","f70d171602a22ea0","056c5807789fdd9f","a3c2a780a47683fa","25f64d67311491f0","c5616edc3d68cf06"],"style":{"label":true},"type":"group","w":1047,"x":199,"y":190,"z":"678153b1daa0529a"},{"g":"7d829222d2ef7ab2","h":204,"id":"5bd563066938c2f3","name":"exception posted to the debug panel if exception not caught and function node not being supervised","nodes":["2acfd9b89aa5a4f0","c2dc81f0f379b496","0610dfd55a620cd5","d36a8aa22bce4662","eb33aab579f867c1"],"style":{"label":true},"type":"group","w":1054,"x":194,"y":731,"z":"678153b1daa0529a"},{"g":"7d829222d2ef7ab2","h":235.5,"id":"7ed7a1dc7f44409a","name":"if exception is caught, no debug message and the catch node handles it","nodes":["1064a20a70a4d159","cbbdca5f81537d51","94f0dace67bcab25","714c969b3b036080","a7747cea4a1b7ac5","c35fef31f0dec2c7","6a4bfef352350b72"],"style":{"label":true},"type":"group","w":1086,"x":196,"y":452.5,"z":"678153b1daa0529a"},{"g":"e49cae74aca6e4aa","h":217.125,"id":"b2f1aafe54bf14d6","name":"no exception is raised if function is being supervised","nodes":["8c0d2959be4c8449","7c60e8efbf36cfb2","2bad596c31c9614c","478f54839df11249","5210bb11cbfd8184","637da1e5ea2fa8d2","8e15d37d50603cbe","0804f9de5cbb31b7"],"style":{"label":true},"type":"group","w":1048.3333435058594,"x":193.66665649414062,"y":1036,"z":"678153b1daa0529a"},{"g":"e49cae74aca6e4aa","h":204,"id":"ae831a2255a48b68","name":"exception posted to the debug panel if exception not caught and function node not being supervised","nodes":["e6bad32c2babea2d","43921beebe749863","247105e3e1174886","576520af1b49706d","e56ffd82b2beaec5"],"style":{"label":true},"type":"group","w":1039.3333435058594,"x":197.66665649414062,"y":1539,"z":"678153b1daa0529a"},{"g":"e49cae74aca6e4aa","h":235.5,"id":"3e2cbb65dff9baec","name":"if exception is caught, no debug message and the catch node handles it","nodes":["98af67622beba548","96a1bf65b0361c8d","6fd4f21bd30c0756","798d290779817374","0e5f5779ab066e4c","b20ed504160e56a2","ef0862b998bd51e6"],"style":{"label":true},"type":"group","w":1059.3333435058594,"x":195.66665649414062,"y":1281.5,"z":"678153b1daa0529a"},{"crontab":"","g":"b7e1e4d9d98ef1bb","id":"e1926e702f82036d","name":"","once":false,"onceDelay":0.1,"payload":"","payloadType":"date","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","topic":"","type":"inject","wires":[["0b270a75f19fe296"]],"x":305,"y":366.125,"z":"678153b1daa0529a"},{"finalize":"","func":"\n1 / 0","g":"b7e1e4d9d98ef1bb","id":"0b270a75f19fe296","initialize":"","libs":[],"name":"divide by zero causes an exception","noerr":0,"outputs":1,"timeout":0,"type":"function","wires":[["f70d171602a22ea0"]],"x":566,"y":366.125,"z":"678153b1daa0529a"},{"g":"b7e1e4d9d98ef1bb","id":"a7e6e47b5451fe98","name":"","scope":["0b270a75f19fe296"],"type":"catch","uncaught":false,"wires":[["a3c2a780a47683fa"]],"x":518,"y":239,"z":"678153b1daa0529a"},{"g":"b7e1e4d9d98ef1bb","id":"f70d171602a22ea0","name":"","type":"ut-assert-failure","wires":[],"x":990,"y":366.125,"z":"678153b1daa0529a"},{"auto_shutdown":"never","child_restart":"permanent","child_shutdown":"brutal_kill","child_shutdown_timeout":"0","child_type":"worker","g":"b7e1e4d9d98ef1bb","id":"056c5807789fdd9f","intensity":"1","name":"","period":"5","scope":["0b270a75f19fe296"],"strategy":"one_for_one","supervisor_type":"static","type":"erlsupervisor","wires":[[]],"x":327,"y":241.5,"z":"678153b1daa0529a"},{"crontab":"","g":"5bd563066938c2f3","id":"2acfd9b89aa5a4f0","name":"","once":false,"onceDelay":0.1,"payload":"","payloadType":"date","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","topic":"","type":"inject","wires":[["c2dc81f0f379b496"]],"x":300,"y":772,"z":"678153b1daa0529a"},{"finalize":"","func":"1 / 0","g":"5bd563066938c2f3","id":"c2dc81f0f379b496","initialize":"","libs":[],"name":"divide by zero causes an exception","noerr":0,"outputs":1,"timeout":0,"type":"function","wires":[["0610dfd55a620cd5"]],"x":598,"y":829.75,"z":"678153b1daa0529a"},{"g":"5bd563066938c2f3","id":"0610dfd55a620cd5","name":"","type":"ut-assert-failure","wires":[],"x":978,"y":829.75,"z":"678153b1daa0529a"},{"g":"5bd563066938c2f3","id":"d36a8aa22bce4662","inverse":false,"msgtype":"error","name":"","nodeid":"c2dc81f0f379b496","scope":["c2dc81f0f379b496"],"type":"ut-assert-debug","wires":[["eb33aab579f867c1"]],"x":664,"y":894,"z":"678153b1daa0529a"},{"g":"b7e1e4d9d98ef1bb","id":"a3c2a780a47683fa","name":"","type":"ut-assert-failure","wires":[],"x":827,"y":307,"z":"678153b1daa0529a"},{"crontab":"","g":"7ed7a1dc7f44409a","id":"1064a20a70a4d159","name":"","once":false,"onceDelay":0.1,"payload":"","payloadType":"date","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","topic":"","type":"inject","wires":[["cbbdca5f81537d51"]],"x":302,"y":569.625,"z":"678153b1daa0529a"},{"finalize":"","func":"1 / 0","g":"7ed7a1dc7f44409a","id":"cbbdca5f81537d51","initialize":"","libs":[],"name":"divide by zero causes an exception","noerr":0,"outputs":1,"timeout":0,"type":"function","wires":[["94f0dace67bcab25"]],"x":562,"y":569.625,"z":"678153b1daa0529a"},{"g":"7ed7a1dc7f44409a","id":"94f0dace67bcab25","name":"","type":"ut-assert-failure","wires":[],"x":890,"y":569.625,"z":"678153b1daa0529a"},{"g":"7ed7a1dc7f44409a","id":"714c969b3b036080","inverse":true,"msgtype":"error","name":"","nodeid":"cbbdca5f81537d51","scope":["cbbdca5f81537d51"],"type":"ut-assert-debug","wires":[["6a4bfef352350b72"]],"x":819,"y":647,"z":"678153b1daa0529a"},{"g":"7ed7a1dc7f44409a","id":"a7747cea4a1b7ac5","name":"","scope":["cbbdca5f81537d51"],"type":"catch","uncaught":false,"wires":[["c35fef31f0dec2c7"]],"x":515,"y":493.5,"z":"678153b1daa0529a"},{"count":1,"g":"7ed7a1dc7f44409a","id":"c35fef31f0dec2c7","name":"","type":"ut-assert-success","wires":[],"x":940,"y":493.5,"z":"678153b1daa0529a"},{"g":"b7e1e4d9d98ef1bb","id":"25f64d67311491f0","inverse":true,"msgtype":"error","name":"","nodeid":"0b270a75f19fe296","scope":["0b270a75f19fe296"],"type":"ut-assert-debug","wires":[["c5616edc3d68cf06"]],"x":882,"y":231,"z":"678153b1daa0529a"},{"crontab":"","g":"b2f1aafe54bf14d6","id":"8c0d2959be4c8449","name":"","once":false,"onceDelay":0.1,"payload":"","payloadType":"date","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","topic":"","type":"inject","wires":[["7c60e8efbf36cfb2"]],"x":299.6666564941406,"y":1212.125,"z":"678153b1daa0529a"},{"finalize":"","func":"\ntimer:sleep(5_000)","g":"b2f1aafe54bf14d6","id":"7c60e8efbf36cfb2","initialize":"","libs":[],"name":"divide by zero causes an exception","noerr":0,"outputs":1,"timeout":"1","type":"function","wires":[["478f54839df11249"]],"x":560.6666564941406,"y":1212.125,"z":"678153b1daa0529a"},{"g":"b2f1aafe54bf14d6","id":"2bad596c31c9614c","name":"","scope":["7c60e8efbf36cfb2"],"type":"catch","uncaught":false,"wires":[["637da1e5ea2fa8d2"]],"x":512.6666564941406,"y":1085,"z":"678153b1daa0529a"},{"g":"b2f1aafe54bf14d6","id":"478f54839df11249","name":"","type":"ut-assert-failure","wires":[],"x":984.6666564941406,"y":1212.125,"z":"678153b1daa0529a"},{"auto_shutdown":"never","child_restart":"permanent","child_shutdown":"brutal_kill","child_shutdown_timeout":"0","child_type":"worker","g":"b2f1aafe54bf14d6","id":"5210bb11cbfd8184","intensity":"1","name":"","period":"5","scope":["7c60e8efbf36cfb2"],"strategy":"one_for_one","supervisor_type":"static","type":"erlsupervisor","wires":[[]],"x":321.6666564941406,"y":1087.5,"z":"678153b1daa0529a"},{"g":"b2f1aafe54bf14d6","id":"637da1e5ea2fa8d2","name":"","type":"ut-assert-failure","wires":[],"x":821.6666564941406,"y":1153,"z":"678153b1daa0529a"},{"g":"b2f1aafe54bf14d6","id":"8e15d37d50603cbe","inverse":true,"msgtype":"error","name":"","nodeid":"7c60e8efbf36cfb2","scope":["7c60e8efbf36cfb2"],"type":"ut-assert-debug","wires":[["0804f9de5cbb31b7"]],"x":876.6666564941406,"y":1077,"z":"678153b1daa0529a"},{"crontab":"","g":"ae831a2255a48b68","id":"e6bad32c2babea2d","name":"","once":false,"onceDelay":0.1,"payload":"","payloadType":"date","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","topic":"","type":"inject","wires":[["43921beebe749863"]],"x":303.6666564941406,"y":1580,"z":"678153b1daa0529a"},{"finalize":"","func":"timer:sleep(5_000)","g":"ae831a2255a48b68","id":"43921beebe749863","initialize":"","libs":[],"name":"divide by zero causes an exception","noerr":0,"outputs":1,"timeout":"1","type":"function","wires":[["247105e3e1174886"]],"x":601.6666564941406,"y":1637.75,"z":"678153b1daa0529a"},{"g":"ae831a2255a48b68","id":"247105e3e1174886","name":"","type":"ut-assert-failure","wires":[],"x":981.6666564941406,"y":1637.75,"z":"678153b1daa0529a"},{"g":"ae831a2255a48b68","id":"576520af1b49706d","inverse":false,"msgtype":"error","name":"","nodeid":"43921beebe749863","scope":["43921beebe749863"],"type":"ut-assert-debug","wires":[["e56ffd82b2beaec5"]],"x":667.6666564941406,"y":1702,"z":"678153b1daa0529a"},{"crontab":"","g":"3e2cbb65dff9baec","id":"98af67622beba548","name":"","once":false,"onceDelay":0.1,"payload":"","payloadType":"date","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","topic":"","type":"inject","wires":[["96a1bf65b0361c8d"]],"x":301.6666564941406,"y":1397.8125,"z":"678153b1daa0529a"},{"finalize":"","func":"timer:sleep(5_000)","g":"3e2cbb65dff9baec","id":"96a1bf65b0361c8d","initialize":"","libs":[],"name":"divide by zero causes an exception","noerr":0,"outputs":1,"timeout":"1","type":"function","wires":[["6fd4f21bd30c0756"]],"x":561.6666564941406,"y":1397.8125,"z":"678153b1daa0529a"},{"g":"3e2cbb65dff9baec","id":"6fd4f21bd30c0756","name":"","type":"ut-assert-failure","wires":[],"x":889.6666564941406,"y":1397.8125,"z":"678153b1daa0529a"},{"g":"3e2cbb65dff9baec","id":"798d290779817374","inverse":true,"msgtype":"error","name":"","nodeid":"96a1bf65b0361c8d","scope":["96a1bf65b0361c8d"],"type":"ut-assert-debug","wires":[["ef0862b998bd51e6"]],"x":818.6666564941406,"y":1476,"z":"678153b1daa0529a"},{"g":"3e2cbb65dff9baec","id":"0e5f5779ab066e4c","name":"","scope":["96a1bf65b0361c8d"],"type":"catch","uncaught":false,"wires":[["b20ed504160e56a2"]],"x":514.6666564941406,"y":1322.5,"z":"678153b1daa0529a"},{"count":1,"g":"3e2cbb65dff9baec","id":"b20ed504160e56a2","name":"","type":"ut-assert-success","wires":[],"x":939.6666564941406,"y":1322.5,"z":"678153b1daa0529a"},{"g":"b2f1aafe54bf14d6","id":"0804f9de5cbb31b7","name":"","type":"ut-assert-failure","wires":[],"x":1146,"y":1153,"z":"678153b1daa0529a"},{"g":"3e2cbb65dff9baec","id":"ef0862b998bd51e6","name":"","type":"ut-assert-failure","wires":[],"x":1159,"y":1397.8125,"z":"678153b1daa0529a"},{"g":"b7e1e4d9d98ef1bb","id":"c5616edc3d68cf06","name":"","type":"ut-assert-failure","wires":[],"x":1150,"y":308,"z":"678153b1daa0529a"},{"g":"7ed7a1dc7f44409a","id":"6a4bfef352350b72","name":"","type":"ut-assert-failure","wires":[],"x":1186,"y":569.625,"z":"678153b1daa0529a"},{"g":"ae831a2255a48b68","id":"e56ffd82b2beaec5","ignore_failure_if_succeed":false,"name":"","rules":[{"p":"debug.nodeid","pt":"msg","t":"eql","to":"43921beebe749863","tot":"str"},{"p":"payload['level']","pt":"msg","t":"eql","to":"20","tot":"num"},{"p":"payload.msg.error_msg","pt":"msg","t":"eql","to":"unexpected exit","tot":"str"},{"p":"payload.name","pt":"msg","t":"eql","to":"divide by zero causes an exception","tot":"str"}],"type":"ut-assert-values","wires":[[]],"x":1131,"y":1702,"z":"678153b1daa0529a"},{"g":"5bd563066938c2f3","id":"eb33aab579f867c1","ignore_failure_if_succeed":false,"name":"","rules":[{"p":"debug.nodeid","pt":"msg","t":"eql","to":"c2dc81f0f379b496","tot":"str"},{"p":"payload['level']","pt":"msg","t":"eql","to":"20","tot":"num"},{"p":"payload.msg.error_msg","pt":"msg","t":"eql","to":"unexpected exit","tot":"str"},{"p":"payload.name","pt":"msg","t":"eql","to":"divide by zero causes an exception","tot":"str"}],"type":"ut-assert-values","wires":[[]],"x":1142,"y":894,"z":"678153b1daa0529a"}]