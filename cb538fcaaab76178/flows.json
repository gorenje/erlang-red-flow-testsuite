[{"disabled":false,"env":[{"name":"ERED_TIMEOUT","type":"num","value":"5"},{"name":"ERED_PENDING","type":"bool","value":"true"}],"id":"cb538fcaaab76178","info":"<small><i>[Share Link](https://flows.red-erik.org/f/cb538fcaaab76178)</i></small>\n\n## Supervisor loops\n\nSupervisor loops are not possible and Erlang-Red should error out.\n\n![img](https://cdn.openmindmap.org/content/1748870779411_Screenshot_2025-06-02_at_15.26.10.png)\n\nThis this flow the <a class=\"ahl-node-only\" data-ids=\"6aed3a08befb93aa\">first supervisor</a> is the supervisor of the <a class=\"ahl-node-only\" data-ids=\"bf3c14de41930be2\">second supervisor</a> which in turn is the supervisor of the <a class=\"ahl-node-only\" data-ids=\"923a99213caa43c4\">third supervisor</a> which is the supervisor of the <a class=\"ahl-node-only\" data-ids=\"a0451f2d039d8778\">fourth supervisor</a>, the <a class=\"ahl-node-only\" data-ids=\"19d8f8c07a31296c\">debug 2</a> node and the <a class=\"ahl-node-only\" data-ids=\"6b5f9bcec32f2b8b\">exit on message</a> function node.\n\nThat structure would be perfectly ok it weren't for the fact that the <a class=\"ahl-node-only\" data-ids=\"a0451f2d039d8778\">fourth supervisor</a> is also the supervisor of the <a class=\"ahl-node-only\" data-ids=\"6aed3a08befb93aa\">first supervisor</a> and that closes the loop.\n\nThis structure is not possible because it could well lead to an loop of restarts and failures or restarts of restarts.\n\n\n","label":"[supervisor] supervisor loops","type":"tab"},{"auto_shutdown":"never","child_restart":"permanent","child_shutdown":"infinite","child_shutdown_timeout":"0","child_type":"worker","id":"923a99213caa43c4","intensity":"52","name":"third supervisor","period":"20","scope":["6b5f9bcec32f2b8b","19d8f8c07a31296c","a0451f2d039d8778"],"strategy":"one_for_one","supervisor_type":"static","type":"erlsupervisor","wires":[[]],"x":1320.0000762939453,"y":324.3333535194397,"z":"cb538fcaaab76178"},{"finalize":"","func":"exit(self(), normal)","id":"6b5f9bcec32f2b8b","initialize":"","libs":[],"name":"exit on message","noerr":0,"outputs":1,"timeout":0,"type":"function","wires":[[]],"x":1304.3334121704102,"y":401.66663932800293,"z":"cb538fcaaab76178"},{"crontab":"","id":"fdd041cfd080c1d7","name":"Start Button","once":false,"onceDelay":0.1,"payload":"","payloadType":"date","props":[{"p":"payload"},{"p":"msgcnt","v":"0","vt":"num"}],"repeat":"","topic":"","type":"inject","wires":[["aba46d81a0c32892"]],"x":442.00000762939453,"y":408.33337593078613,"z":"cb538fcaaab76178"},{"action":"","from":"","id":"aba46d81a0c32892","name":"","property":"","reg":false,"rules":[{"p":"payload","pt":"msg","t":"set","to":"","tot":"date"},{"p":"msgcnt","pt":"msg","t":"set","to":"$$.msgcnt + 1","tot":"jsonata"}],"to":"","type":"change","wires":[["a276f161c4527b56","6b5f9bcec32f2b8b","5dc57e099c2e0630"]],"x":647.3333511352539,"y":452.04089546203613,"z":"cb538fcaaab76178"},{"allowrate":false,"drop":false,"id":"a276f161c4527b56","name":"","nbRateUnits":"1","outputs":1,"pauseType":"delay","randomFirst":"1","randomLast":"5","randomUnits":"seconds","rate":"1","rateUnits":"second","timeout":"1","timeoutUnits":"milliseconds","type":"delay","wires":[["85cd42cbfa36fb5d"]],"x":839.333381652832,"y":526.4158954620361,"z":"cb538fcaaab76178"},{"checkall":"true","id":"85cd42cbfa36fb5d","name":"stop after 2000 messages","outputs":1,"property":"msgcnt","propertyType":"msg","repair":false,"rules":[{"t":"lt","v":"2000","vt":"num"}],"type":"switch","wires":[["aba46d81a0c32892"]],"x":420.9999771118164,"y":529.4158954620361,"z":"cb538fcaaab76178"},{"auto_shutdown":"never","child_restart":"permanent","child_shutdown":"infinite","child_shutdown_timeout":"0","child_type":"worker","id":"6aed3a08befb93aa","intensity":"1000","name":"first supervisor","period":"1","scope":["bf3c14de41930be2"],"strategy":"one_for_one","supervisor_type":"static","type":"erlsupervisor","wires":[[]],"x":1073.3332061767578,"y":243.3333158493042,"z":"cb538fcaaab76178"},{"auto_shutdown":"never","child_restart":"permanent","child_shutdown":"infinite","child_shutdown_timeout":"0","child_type":"worker","id":"bf3c14de41930be2","intensity":"30","name":"second supervisor","period":"30","scope":["923a99213caa43c4"],"strategy":"one_for_one","supervisor_type":"static","type":"erlsupervisor","wires":[[]],"x":1320.9997940063477,"y":242.66665649414062,"z":"cb538fcaaab76178"},{"auto_shutdown":"never","child_restart":"permanent","child_shutdown":"infinite","child_shutdown_timeout":"0","child_type":"worker","id":"a0451f2d039d8778","intensity":"1","name":"fourth supervisor","period":"5","scope":["6aed3a08befb93aa"],"strategy":"one_for_one","supervisor_type":"static","type":"erlsupervisor","wires":[[]],"x":1088.666374206543,"y":328.9999294281006,"z":"cb538fcaaab76178"},{"count":"2000","id":"5dc57e099c2e0630","name":"","type":"ut-assert-success","wires":[],"x":848.5714285714284,"y":322.85714285714283,"z":"cb538fcaaab76178"}]