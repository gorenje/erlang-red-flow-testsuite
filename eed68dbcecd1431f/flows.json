[{"id":"eed68dbcecd1431f","type":"tab","label":"[http] dynamic redirect","disabled":false,"info":"## HTTP redirect\n\nDynamic redirect overwriting the header settings of the node.\n\nTesting the dynamic setting of the Location header.","env":[{"name":"ERED_NOT_EUNIT","type":"bool","value":"true"}]},{"id":"5b426d51dcf3c2f8","type":"http response","z":"eed68dbcecd1431f","name":"redirect to https","statusCode":"301","headers":{},"x":747.8572082519531,"y":423.1428680419922,"wires":[]},{"id":"c6d401a2115666f6","type":"change","z":"eed68dbcecd1431f","name":"","rules":[{"p":"statusCode","pt":"msg","t":"set","to":"301","tot":"num"},{"p":"_loc","pt":"msg","t":"set","to":"'http://' & $$.req.hostname & \":8080\" & $$.req.originalUrl","tot":"jsonata"},{"p":"payload","pt":"msg","t":"set","to":"\"<a href='\" & $$._loc & \"'>Redirect</a>\\n\"","tot":"jsonata"},{"p":"headers","pt":"msg","t":"set","to":"{ \"Location\": $$._loc }","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":590.4285507202148,"y":329.2857093811035,"wires":[["5b426d51dcf3c2f8"]]},{"id":"2f671b7422d502d9","type":"http in","z":"eed68dbcecd1431f","name":"","url":"/example7/fubar","method":"get","upload":false,"swaggerDoc":"","x":434.85717010498047,"y":250.71429347991943,"wires":[["c6d401a2115666f6"]]},{"id":"e3748318a95178e9","type":"inject","z":"eed68dbcecd1431f","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":250.0000228881836,"y":546.8214645385742,"wires":[["dda324dd7f114c3d"]]},{"id":"455ca5e77834096a","type":"http request","z":"eed68dbcecd1431f","name":"","method":"GET","ret":"txt","paytoqs":"ignore","url":"http://localhost:8080/example7/fubar","tls":"","persist":false,"proxy":"","insecureHTTPParser":false,"authType":"","senderr":false,"headers":[],"x":711.5237757364908,"y":546.8214645385742,"wires":[["624fa5de5352cb90"]]},{"id":"dda324dd7f114c3d","type":"delay","z":"eed68dbcecd1431f","name":"","pauseType":"delay","timeout":"250","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":475.7618993123372,"y":546.8214645385742,"wires":[["455ca5e77834096a"]]},{"id":"624fa5de5352cb90","type":"ut-assert-values","z":"eed68dbcecd1431f","name":"","rules":[{"p":"statusCode","pt":"msg","t":"eql","to":"301","tot":"num"},{"p":"payload","pt":"msg","t":"eql","to":"<a href='http://localhost:8080/example7/fubar'>Redirect</a>\\n","tot":"str"}],"x":957.2856521606445,"y":546.8214645385742,"wires":[[]]}]